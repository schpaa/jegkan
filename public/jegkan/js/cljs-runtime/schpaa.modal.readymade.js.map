{"version":3,"sources":["schpaa/modal/readymade.cljs"],"mappings":"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","names":["p__56002","map__56003","cljs.core/--destructure-map","cljs.core.get","schpaa.modal.readymade/modal-form","form-id","ok","ref","reagent.core.atom","fork.re-frame/form","_","temp__5753__auto__","cljs.core/deref","r","p__56004","map__56005","values","nrpk.fsm_helpers.send","p__56006","map__56007","dirty","handle-submit","props","schpaa.components.fields.textarea","cljs.core.assoc","schpaa.components.fields/save-ref","schpaa.components.fields/placeholder","schpaa.button/danger-button","schpaa.button/regular-button","p__56008","map__56009","schpaa.modal.readymade/modal-form2","p__56010","map__56011","p__56012","map__56013","schpaa.modal.readymade/toggle-favorite","id","user-auth","re_frame.core.subscribe","js/alert","schpaa.debug/ppr","p__56014","map__56015","schpaa.modal.readymade/modal-header","toggle-favorite-fn","read-db-fn","map__56016","star","schpaa.icon/small","slot","number","navn","kind","description","schpaa.components.views/number-view","schpaa.components.views/name-view","schpaa.components.views/normalize-kind","schpaa.components.views/slot-view","p__56017","map__56018","schpaa.modal.readymade/user-modal-header","map__56019","n\u00f8kkelnummer","telefon","m","schpaa.modal.readymade/modal-booking-details-dialogcontent","map__56020","cljs.core.reduce","a","e","booking.database/read","start","end","selected","schpaa.debug/ppre","schpaa.modal.readymade/modal-booking-title2","p__56021","map__56022","schpaa.modal.readymade/confirm-booking","uid","schpaa.modal/form-action","cljs.core.conj","cljs.core/tap>","booking.database/write","schpaa.modal.readymade/details-dialog-fn","p1__56023#","logg.database/boat-db","schpaa.modal.readymade/user-details-dialog-fn","p1__56024#","user.database/lookup-userinfo","p__56025","map__56026","schpaa.modal.readymade/popup","content","cljs.core.into","p__56027","map__56028","schpaa.modal.readymade/message","x","schpaa.button/build-buttonbar-content","or__4253__auto__","p__56029","map__56030","schpaa.modal.readymade/ok-cancel","button-captions","cljs.core.dissoc","schpaa.modal.readymade/open-complex","p1__56031#","ok-fn"],"sourcesContent":["(ns schpaa.modal.readymade\n  (:require [schpaa.modal :as modal]\n            [schpaa.components.fields :as fields :refer [save-ref placeholder]]\n            [schpaa.components.views :refer [number-view slot-view normalize-kind name-view]]\n            [reagent.core :as r]\n            [fork.re-frame :as fork]\n            [re-frame.core :as rf]\n            [schpaa.icon :as icon]\n            [nrpk.fsm-helpers]\n            [db.core :as db]\n            [schpaa.debug :as l]\n            [logg.database]\n            [booking.database] \n            [schpaa.button :as bu]\n            [user.database]))\n\n(defn modal-form [{:keys [form-id ok]}]\n  (let [ref (r/atom nil)]\n    [fork/form {:prevent-default?    true\n                :form-id             form-id\n                :initial-values      {:feilmelding \"\"}\n                :clean-on-unmount?   true\n                :component-did-mount (fn [_]\n                                       (when-let [r @ref]\n                                         (.focus r)))\n                :keywordize-keys     true\n                :on-submit           (fn [{:keys [values]}]\n                                       (ok values)\n                                       (nrpk.fsm-helpers/send :e.hide))}\n     (fn [{:keys [dirty handle-submit form-id] :as props}]\n       (if dirty\n         (nrpk.fsm-helpers/send :e.dirty)\n         (nrpk.fsm-helpers/send :e.clean))\n       [:form\n        {:id        form-id\n         :on-submit handle-submit}\n        [:div.space-y-4\n         (fields/textarea (-> props\n                              (assoc :auto-focus 1)\n                              (save-ref ref)\n                              (placeholder \"Kort beskrivelse\")) :label \"Meld om feil\" :name :feilmelding)\n\n         [:div.flex.justify-end.gap-4\n          (bu/danger-button {:type     :submit\n                             :disabled (not (some? dirty))} \"Lagre\")\n          (bu/regular-button {:type     :button\n                              :on-click #(nrpk.fsm-helpers/send :e.hide)} \"Avbryt\")]]])]))\n\n(defn modal-form2\n  \"provide a store function\"\n  [{:keys [form-id ok]}]\n  [fork/form {:prevent-default?  true\n              :initial-values    {:description \"\"}\n              :form-id           form-id\n              :clean-on-unmount? true\n              :keywordize-keys   true\n              :on-submit         (fn [{:keys [values]}]\n                                   (ok values)\n                                   (nrpk.fsm-helpers/send :e.hide))}\n   (fn [{:keys [dirty handle-submit form-id] :as props}]\n     (if dirty\n       (nrpk.fsm-helpers/send :e.dirty)\n       (nrpk.fsm-helpers/send :e.clean))\n     [:form\n      {:id        form-id\n       :on-submit handle-submit}\n      [:div.space-y-4\n       (fields/textarea (-> props\n                            (assoc :auto-focus 1)\n                            (placeholder \"Kort beskrivelse\")) :label \"Melding til turkamerater\" :name :description)\n\n       [:div.flex.justify-end.gap-4\n        (bu/regular-button {:type     :button\n                            :on-click #(nrpk.fsm-helpers/send :e.hide)} \"Avbryt\")\n        (bu/danger-button {:type     :submit\n                           :disabled false #_(not (some? dirty))} \"Lagre\")]]])])\n\n(defn toggle-favorite [id]\n  (let [user-auth (rf/subscribe [::db/user-auth])]\n    (js/alert (l/ppr [\"toggle-fav\" id (:uid @user-auth)]))))\n\n(defn modal-header\n  \"A view that is a presentation of the boat with some details and a Star to click on\"\n  [{:keys [toggle-favorite-fn read-db-fn]}]\n  (let [star [:div {:on-click #(toggle-favorite-fn)\n                    :class    [\"text-amber-500\"]} [icon/small :star]]\n        {:keys [slot number navn kind description]} (read-db-fn)]\n\n    [:div.grid.gap-2.p-4.w-full.bg-gray-300                 ;.bg-gray-500.text-base.font-normal\n     {:class []                                             ; [\"dark:text-white\" :text-white]\n      :style {:grid-template-columns \"3rem 1fr min-content\"}}\n     [:div.self-start.justify-self-center (number-view number)]\n     [:div.leading-snug\n      (name-view navn)\n      [:div.text-sm\n       {}                                                   ;:class [\"dark:text-gray-400\" \"text-gray-500\"]}\n       (normalize-kind kind)]]\n     [:div (slot-view slot)]\n     [:div.justify-self-center.self-start.pt-px star]\n     [:div.col-span-2.font-normal.text-base\n      ;{:class [\"dark:text-gray-400\" \"text-gray-500\"]}\n      description]]))\n\n(defn user-modal-header\n  \"A view that is a presentation of a user with some details and a Star to click on?\"\n  [{:keys [toggle-favorite-fn read-db-fn]}]\n  (let [star [:div {:on-click #(toggle-favorite-fn)\n                    :class    [\"text-amber-500\"]} [icon/small :star]]\n        {:keys [n\u00f8kkelnummer telefon navn kind description] :as m} (read-db-fn)]\n    [:div.p-4\n     [:div navn]\n     [:div telefon]\n     [:div n\u00f8kkelnummer]]\n\n    #_[:div.grid.gap-2.p-4.w-full.bg-gray-300               ;.bg-gray-500.text-base.font-normal\n       {:class []                                           ; [\"dark:text-white\" :text-white]\n        :style {:grid-template-columns \"3rem 1fr min-content\"}}\n\n       [:div.leading-snug\n\n        [:div.text-sm\n         {}                                                 ;:class [\"dark:text-gray-400\" \"text-gray-500\"]}\n         (normalize-kind kind)]]\n       [:div (slot-view slot)]\n       [:div.justify-self-center.self-start.pt-px star]\n       [:div.col-span-2.font-normal.text-base\n        ;{:class [\"dark:text-gray-400\" \"text-gray-500\"]}\n        description]]))\n\n;region booking\n\n(defn modal-booking-details-dialogcontent\n  \"\"\n  [id]\n  (let [read-db-fn (fn [] (get (reduce (fn [a e] (assoc a (:id e) e)) {} (booking.database/read)) id))\n        {:keys [start end selected slot number navn kind description] :as m} (read-db-fn)]\n\n    [:div.grid.gap-2.text-base.font-normal.w-full\n     {:class [\"dark:text-white\" :text-black]\n      :style {:grid-template-columns \"3rem 1fr min-content\"}}\n     [:div.col-span-3 \"modal booking title\"]\n\n     [:div.col-span-3 [l/ppre m]]\n\n     [:div.col-span-3\n      [:div start]\n      [:div end]\n      [:div (l/ppr selected)]]]))\n\n;endregion\n\n(defn modal-booking-title2\n  \"\"\n  [m]\n  #_(let [read-db-fn (fn [] (get (reduce (fn [a e] (assoc a (:id e) e)) {} (booking.database/read)) id))\n          {:keys [start end selected slot number navn kind description] :as m} (read-db-fn)])\n\n  [:div.grid.gap-2.text-base.font-normal.w-full.p-4\n   {:class [\"dark:text-white\" :text-black]\n    :style {:grid-template-columns \"3rem 1fr min-content\"}}\n   [:div.col-span-3 \"modal booking title\"]\n\n   [:div.col-span-3 [l/ppre m]]\n\n   #_[:div.col-span-3\n      [:div start]\n      [:div end]\n      [:div (l/ppr selected)]]])\n\n;;;;;;;;;;;;;;;;;;;;;; NEW CLASSES, prefer these:\n\n(defn confirm-booking [{:keys [start end selected] :as m}]\n  (let [uid (:uid @(rf/subscribe [::db/user-auth]))]\n    (modal/form-action\n      {:flags   #{}\n       :header  (modal-booking-title2 m)\n       :form-id \"modal-form\"\n       :ok      (fn [values]\n                  (let [values (conj m values {:uid uid})]\n                    (tap> [\"save settings \" values])\n                    (booking.database/write {:uid uid :value values})))\n       :form-fn (fn [m] (modal-form2 m))})))\n\n(defn details-dialog-fn [id]\n  (modal/form-action\n    {:flags   #{:wide}\n     :ok      #(js/alert %)\n     :header  (modal-header\n                {:read-db-fn         (fn [] (get (logg.database/boat-db) id))\n                 :toggle-favorite-fn (fn [] (toggle-favorite id))})\n     :form-fn modal-form\n     :footer  \"Trykk p\u00e5 stjernen for \u00e5 markere som favoritt\"}))\n\n(defn user-details-dialog-fn [id]\n  (modal/form-action\n    {:flags   #{:wide}\n     :ok      #(js/alert %)\n     :header  (user-modal-header\n                {:read-db-fn         (fn [] (user.database/lookup-userinfo id))\n                 :toggle-favorite-fn (fn [] (toggle-favorite id))})\n     :form-fn modal-form\n     :footer  (str id)}))\n\n(defn popup [{:keys [content] :as m}]\n  (modal/form-action\n    (conj\n      {:flags   #{:short-timeout}\n       :form-fn (fn [_]\n                  [:div.space-y-4.p-4x\n                   (into [:div] content)])}\n      m)))\n\n(defn message\n  \"high-level\"\n  [{:keys [content] :as m}]\n  (modal/form-action\n    (conj\n      {:flags   #{:weak-dim}\n       :form-fn (fn [x]\n                  [:div.space-y-4\n                   (into [:div] content)\n                   (bu/build-buttonbar-content {:button-captions (fn [_] \"Ok\")\n                                                :buttons         (or (:buttons m) #{:close})})])}\n      m)))\n\n(defn ok-cancel\n  \"high-level\"\n  [{:keys [content button-captions ok] :as m}]\n  (modal/form-action\n    (conj (dissoc m :content :button-captions :ok)\n          {:form-fn (fn [_]\n                      [:div.space-y-8\n                       (into [:div] content)\n                       (bu/build-buttonbar-content {:button-captions button-captions\n                                                    :ok              ok\n                                                    :buttons         #{:cancel :ok}})])})))\n\n(defn open-complex []\n  (let [ok-fn #(js/alert (l/ppr [\"OK\" %]))\n        m {:flags   #{:weak-dim :-timeout}\n           :footer  \"footer\"\n           :form-id \"modal-form\"\n           :ok      ok-fn\n           :form-fn (fn [m] [:div.space-y-4\n                             [:div \"Above\"]\n                             (modal-form m)\n                             [:div \"Below\"]])\n           :header  (modal-header\n                      {:toggle-favorite-fn #(js/alert \"!\")\n                       :read-db-fn         #(-> {:slot        \"XY\"\n                                                 :number      \"123\"\n                                                 :navn        \"Boatname\"\n                                                 :kind        \"grkayak\"\n                                                 :description \"Fin og fjong\"})})}]\n    (modal/form-action m)))\n"]}