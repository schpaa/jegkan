{"version":3,"sources":["schpaa/components/tab.cljs"],"mappings":"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","names":["schpaa.components.tab/select-bar-top-config","schpaa.components.tab/select-bar-config","schpaa.components.tab/select-bar-bottom-config","schpaa.components.tab/big-arrow","right?","var_args","args__4870__auto__","len__4864__auto__","i__4865__auto__","argseq__4871__auto__","cljs.core/IndexedSeq","schpaa.components.tab/tab","seq74990","G__74991","cljs.core/first","cljs.core/next","self__4851__auto__","_","m","node","cljs.core.atom","at-edge","reagent.core.atom","scroll-pos","items","cljs.core/count","limit","limit-items","reagent.core.create_class","c","cljs.core/reset!","reagent.dom/dom-node","clientWidth","cljs.core/deref","G__74992","x","sl","items'","cljs.core/tap>","p__74995","map__74996","cljs.core/--destructure-map","cljs.core.get","locked?","selected","select","map__74997","bg","p","p+","fg","fg+","hd","br","br-","br+","schpaa.style/fbg'","on-class","cljs.core.concat","off-class","o","or__4253__auto__","p1__74989#","re-frame.core/dispatch","cljs.core.into","iter__4652__auto__","s__74999","cljs.core/LazySeq","temp__5753__auto__","cljs.core/seq","cljs.core/chunked-seq?","c__4650__auto__","size__4651__auto__","b__75001","cljs.core/chunk-buffer","i__75000","vec__75004","cljs.core/-nth","seq__75005","first__75006","map__75007","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__74998","cljs.core/chunk-rest","vec__75015","seq__75016","first__75017","map__75018","cljs.core/cons","cljs.core/rest","page","title","action","icon","selected?","cljs.core._EQ_","schpaa.icon/adapt","cljs.core/fn?","cljs.core/chunk-first"],"sourcesContent":["(ns schpaa.components.tab\n  (:require [re-frame.core :as rf]\n            [reagent.dom]\n            [reagent.core :as r]\n            [schpaa.icon :as icon]\n    #_[schpaa.components.tab :refer-macros [tw]\n       [schpaa.style :as st]]\n            [schpaa.style :as st])\n  (:require-macros [schpaa.components.tab :refer [tw]]))\n\n\n(def select-bar-top-config\n  {:class     [:flex\n               ;:border-2\n               :border-sky-900\n               :last:rounded-br\n               :first:rounded-bl]\n   :on-class  [:btn-on :bg-sky-900 :font-bold]\n   :off-class [:btn-off :font-normal]})\n\n(def select-bar-config\n  {:class     [:flex\n               :border-2\n               :border-sky-900\n               :last:rounded-r\n               :first:rounded-l]\n   :on-class  [:btn-on :h-10 :w-12 :bg-sky-900 :font-bold]\n   :off-class [:btn-off :h-10 :w-12 :font-normal]})\n\n(def select-bar-bottom-config\n  {:class     [:flex\n               :border-2\n               :border-black :dark:border-gray-400\n               :last:rounded-r\n               :first:rounded-l]\n   :on-class  [:btn-on :h-8 :w-6 :bg-black-900 :dark:bg-gray-400 :dark:text-black :font-bold]\n   :off-class [:btn-off :h-8 :w-6 :font-normal :bg-gray-300 :text-gray-900]})\n\n(defn- big-arrow [right?]\n  [:div.mx-1.absolute.inset-y-2.mb-2.-debug\n   {:class (if right? :right-0 :left-0)}\n   [:svg.w-4.h-full\n    {:class            [\"text-black/10\"\n                        \"dark:text-white/10\"]\n     :viewBox          \"0 0 6 20\"\n     :transform        (when-not right? \"scale(-1, 1)\")\n     :transform-origin \"center\"}\n    [:path {:vector-effect :non-scaling-stroke\n            :fill          :none\n            :stroke        :currentColor\n            :stroke-width  4\n            :d             \"M 0 0 L 5 10 L 0 20\"}]]])\n\n(defn tab\n  [_ & m]\n  (let [node (atom nil)\n        at-edge (r/atom false)\n        scroll-pos (r/atom 0)\n        items (count m)\n        limit 455\n        limit-items 3]\n    (r/create-class\n      {:display-name\n       \"test\"\n\n       :component-did-mount\n       (fn [c]\n         (let [_ (reset! node (reagent.dom/dom-node c))\n               clientWidth (.-clientWidth @node)]\n           (doto @node\n             (.addEventListener\n               \"scroll\"\n               (fn [x]\n                 (let [sl (-> x .-target .-scrollLeft)\n                       clientWidth (.-clientWidth @node)\n                       items' (if (< clientWidth limit) limit-items 4)]\n                   (reset! at-edge (< (- (/ clientWidth items') 10) sl))\n                   (reset! scroll-pos sl)\n                   (tap> [\"INNER \" (/ clientWidth items') sl (< (/ clientWidth items') sl)])))))))\n\n       :component-did-update\n       (fn []\n         #_(tap> \":component-did-update\"))\n\n       :reagent-render\n       (fn [{locked?  :locked?\n             selected :selected\n             select   :select}]\n         (let [{:keys [bg p p+ fg fg+ hd br br- br+]} (st/fbg' :tabbar)\n               on-class (concat hd bg fg+ br+ p+ [])\n               off-class (concat hd bg fg br- p)\n               o (or select #(rf/dispatch [:app/navigate-to [%]]))]\n           (into [:div.flex.snap-x.snap-mandatory.overflow-x-auto.hide-scrollbar.z-50.h-16\n                  {:class (concat bg [:border-b] br p)\n                   :style {:scrollbar-width :none}}\n                  (for [[page title action & {:keys [icon]}] m\n                        :let [selected? (= selected page)]]\n                    [:div.shrink-0.flex.justify-center.snap-start\n                     {:on-click (when-not locked? #(do (o page) (when (some? action) (action page))))\n                      :class    (concat [\"w-1/3\" \"br:w-40\"] (if selected? on-class off-class))}\n                     [:button.justify-self-center.self-center.rounded.mt-1\n                      {:class [:outline-none :focus:outline-none :focus:ring-offset-transparent :focus:ring-0]}\n                      [:div.flex.gap-2.flex-center.w-full.whitespace-nowrap.overflow-clip\n                       {:class p}\n                       (if icon [:div.w-6.h-6.hidden.xs:block {:class fg+} [icon/adapt icon 1.5]])\n                       (if (fn? title)\n                         (title)\n                         title)]]])])))})))\n"]}